<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>MusicAngular</title>
  
  <link rel="stylesheet" href="https://bootswatch.com/4/cyborg/bootstrap.min.css">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">


 <script src="https://code.jquery.com/jquery-2.2.0.js"></script>
 <!--
  <script src="audioPlayer.js"></script>
 <script>
     console.log("It works!");
     // loads the audio player
     audioPlayer();
     function audioPlayer(){
       var currentSong = 0;
         $("#audioPlayer")[0].src = $("#playlist li a")[0];
         // $("#audioPlayer")[0].play();
         $("#playlist li a").click(function(e){
         e.preventDefault();
         $("#audioPlayer")[0].src = this;
         $("#playlist li").removeClass("current-song");
         currentSong = $(this).parent().index();
         });
     }
 </script> -->
 
 <script>
 // External Files:
 // https://api.html5media.info/1.1.8/html5media.min.js (enables <video> and <audio> tags in all major browsers)
 // https://cdn.plyr.io/2.0.13/plyr.js
 
 
 // HTML5 audio player + playlist controls...
 // Inspiration: http://jonhall.info/how_to/create_a_playlist_for_html5_audio
 // Mythium Archive: https://archive.org/details/mythium/
 jQuery(function ($) {
     'use strict'
     var supportsAudio = !!document.createElement('audio').canPlayType;
     if (supportsAudio) {
         var index = 0,
             playing = false,
             mediaPath = 'http://localhost:8888/songs/',
             extension = '',
             tracks = [{
                 "track": 1,
                 "name": "Musica Cl√°sica",
                 "length": "2:46",
                 "file": "audio1"
             }, {
                 "track": 2,
                 "name": "Arctics Monkeys - Do I wanna Know",
                 "length": "8:31",
                 "file": "Arctic_Monkeys_Do_I_Wanna_Know"
 
             }],
             buildPlaylist = $.each(tracks, function(key, value) {
                 var trackNumber = value.track,
                     trackName = value.name,
                     trackLength = value.length;
                 if (trackNumber.toString().length === 1) {
                     trackNumber = '0' + trackNumber;
                 } else {
                     trackNumber = '' + trackNumber;
                 }
                 $('#plList').append('<li><div class="plItem"><div class="plNum">' + trackNumber + '.</div><div class="plTitle">' + trackName + '</div><div class="plLength">' + trackLength + '</div></div></li>');
             }),
             trackCount = tracks.length,
             npAction = $('#npAction'),
             npTitle = $('#npTitle'),
             audio = $('#audio1').bind('play', function () {
                 playing = true;
                 npAction.text('Now Playing...');
             }).bind('pause', function () {
                 playing = false;
                 npAction.text('Paused...');
             }).bind('ended', function () {
                 npAction.text('Paused...');
                 if ((index + 1) < trackCount) {
                     index++;
                     loadTrack(index);
                     audio.play();
                 } else {
                     audio.pause();
                     index = 0;
                     loadTrack(index);
                 }
             }).get(0),
             btnPrev = $('#btnPrev').click(function () {
                 if ((index - 1) > -1) {
                     index--;
                     loadTrack(index);
                     if (playing) {
                         audio.play();
                     }
                 } else {
                     audio.pause();
                     index = 0;
                     loadTrack(index);
                 }
             }),
             btnNext = $('#btnNext').click(function () {
                 if ((index + 1) < trackCount) {
                     index++;
                     loadTrack(index);
                     if (playing) {
                         audio.play();
                     }
                 } else {
                     audio.pause();
                     index = 0;
                     loadTrack(index);
                 }
             }),
             li = $('#plList li').click(function () {
                 var id = parseInt($(this).index());
                 if (id !== index) {
                     playTrack(id);
                 }
             }),
             loadTrack = function (id) {
                 $('.plSel').removeClass('plSel');
                 $('#plList li:eq(' + id + ')').addClass('plSel');
                 npTitle.text(tracks[id].name);
                 index = id;
                 audio.src = mediaPath + tracks[id].file + extension;
             },
             playTrack = function (id) {
                 loadTrack(id);
                 audio.play();
             };
         extension = audio.canPlayType('audio/mpeg') ? '.mp3' : audio.canPlayType('audio/ogg') ? '.ogg' : '';
         loadTrack(index);
     }
 });
 
 //initialize plyr
 plyr.setup($('#audio1'), {});
 
 
 
 
 </script>


</head>

<body>
  <base href="/">
  <app-root></app-root>
</body>


</html>